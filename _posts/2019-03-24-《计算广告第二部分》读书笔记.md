---
layout: post
title: 《计算广告第二部分》读书笔记
categories: [计算广告,读书笔记]
description: 《计算广告 互联网商业变现的市场与技术》读书笔记
keywords: 计算广告
mathjax: true
---

**《计算广告 互联网商业变现的市场与技术》读书笔记。**
[书籍下载](https://github.com/364146673/Weixin/blob/master/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%20%E4%BA%92%E8%81%94%E7%BD%91%E5%95%86%E4%B8%9A%E5%8F%98%E7%8E%B0%E7%9A%84%E5%B8%82%E5%9C%BA%E4%B8%8E%E6%8A%80%E6%9C%AF.pdf)

# 二、 在线广告产品逻辑

## 3. 在线广告产品概述

![-w434](/images/15543465916522.jpg)

1. **合约广告产品**：它由线下广告的交易形式衍生而来，又可以分为按照时段售卖的 CPT 广告和按照约定展示量售卖的 CPM 广告。品牌类广告，在门户网站和视频网站较为常见。
2. **竞价广告产品**：其最重要的形式是搜索广告，其产品形式为对搜索关键词的竞价。是解决效果类广告需求的关键产品形式。
3. **程序化交易广告产品**：竞价广告的进一步发展催生了实时竞价的交易形式。以实时竞价为核心的一系列交易方式逐渐演变为机器之间以程序化的方式完成广告交易决策。
4. **原生广告产品**：广告的产品体系除了自身的演进，另一个重要课题是如何处理与非商业化内容的关系，让广告与内容尽可能以“原生”的方式共存。

每一种广告的产品形态来说，都可能会有三个主要的组成部分：面向需求方的接
口、面向供给方的接口、中间的投放系统及匹配策略。

### 3.1 商业产品的设计原则

用户产品演进的根本驱动力是人们追求方便的天性。因此，用户产品的设计原则总是朝着更简单、更直观、更快捷的方向努力，但针对商业产品的设计和运营有较大差异。
简单来说，商业产品一般都有一个明确的商业目标，而商业产品的使用者选用一款产品的动力也是为了优化这个商业目标。

1. 相对于产品功能，要特别关注产品中的策略部分。
2. 要特别关注数据，让运营和产品优化形成闭环。
3. 用户产品追求便捷性的设计原则依然非常重要。

### 3.2 需求方层级组织与接口

一个广告系统的需求方有可能是广告主、代理公司、TD或者DSP。一般来说，需求方提供的广告是分层次管理的。
![-w476](/images/15543495437332.jpg)

1. 广告计划概念上对应于广告主的一次投放合同，其中包括了预算、时间范围等基本信息
2. 广告组对应于一个具体的广告投放策略，主要是设定受众定向条件和出价，是广告效果优化的关键层级
3. 广告创意则是最终展示出来的素材，可能在同一个组策略下有不同尺寸的创意存在

### 3.3 供给方管理接口
供给方即媒体对业务的控制比起需求方来要弱很多，供给端的资源组织主要分媒体和广告位两个层次。一般来说，添加、删除广告位以及查看各广告位的运营数据是主要的功能需求。

![-w705](/images/15543501831491.jpg)


## 4. 合约广告

![-w410](/images/15543557800182.jpg)

### 4.1 广告位合约

> 广告位合约是最早产生的在线广告售卖方式。它是指媒体和广告主约定在某一时间段
内、在某些广告位上固定投送该广告主的广告，相应的结算方式为CPT

### 4.2 受众定向
定向方法评估指标，效果好、覆盖率：
1. 定向的效果，即符合该定向方式的流量上高出平均eCPM的水平；
2. 定向的规模，即这部分流量占整体广告库存流量的比例。

> 受众定向方法

![-w670](/images/15543601411041.jpg)
水平方向表示的是定向技术在广告信息接收过程中大致起作用的阶段，而垂直方向为定性的效果评价。

1. 地域定向（geo-targeting）
2. 人口属性定向（demographical targeting）
3. 频道定向（channel targeting）
4. 上下文定向（contextual targeting）。将频道定向这种方法加以推广，可以根据网页的具体内容来匹配相关的广告，这就是上下文定向。由于覆盖率高，上下文定向也是 ADN 中首选的定向方法之一。
5. 行为定向（behaviorial targeting）。行为定向是展示广告中非常重要的一种定向方式，其框架是根据用户的历史访问行为了解用户兴趣，从而投送相关广告。
6. 精确位置定向（hyper-local targeting）
7. 重定向（retargeting）。这是一种最简单的定制化标签，其原理是对某个广告主过去一段时间的访客投放广告以提升效果。
8. 新客推荐定向（look-alike targeting ）
9. 团购（group-purchase）

> 受众定向标签体系

在一些反映用户兴趣类的受众定向方法（如行为定向、上下文定向等）中，我们需要
一个标签体系，将每个用户映射到其中的一个或几个标签上去。


* 结构化兴趣标签体系
* 非结构化的兴趣标签体系
* 搜索广告中的关键词标签形式

### 4.3 展示量合约
互联网主流的品牌广告投放方式是按照 CPM 结算的展示量合约。

> 展示量合约指的是约定某种受众条件下的展示量，然后按照事先约定好的单位展示量价格来结算。这种合约还有一个名称，就是担保式投送即 GD，其中的“担保”指的就是量的约定。实际执行中，在未能完成合约中的投放量时，可能要求媒体承担一定的赔偿。

展示量合约模式已经反映了互联网广告计算驱动的本质：分析得到用户和上下
文的属性，并由服务端根据这些属性及广告库情况动态决定广告候选。

流量预测和在线分配的主要产品策略问题：

1. 流量预测（traffic forecasting），其三个主要用途：售前指导、在线流量分配、出价指导
2. 流量塑形（traffic shaping）：在有些情形下，我们可以主动地影响流量，以利于合约的达成。
3. 在线分配：各个合约要求的人群很可能大量交叠，如何设计分配策略，使得各个合约都尽可能被满足。

## 5. 搜索与竞价广告

![-w428](/images/15543659541802.jpg)

### 5.1 搜素广告

> 搜索广告是比较典型的竞价广告产品，其特点是广告主就某标的物（在这里是关键词）的广告展示机会展开拍卖式的竞争，并根据竞争结果依次占据该广告展示的若干位置。

#### 5.1.1 搜索广告产品形态

搜索广告是以上下文查询词为粒度进行受众定向，并按照竞价方式售卖和 CPC 结算的广告产品。搜索广告竞价的标的物是竞价关键词（bid term），用户输入的查询（query）通过与关键词相匹配来确定是否可以触发该条广告。

在互联网广告的整个产品谱系当中，搜索广告有着特殊重要的地位，具有以下鲜明的
产品和技术特点：
1. 搜索广告的变现能力
2. 搜索广告的受众定向标签，即是上下文的搜索查询
3. 搜索广告的展示形式与自然结果的展示形式非常接近，往往仅仅在底色和文字链接中有不太引人注目的提示。
4. 从搜索广告发展起来的竞价交易模式已经逐渐发展成为互联网广告最主流的交易模式。


#### 5.1.2 搜索广告产品新形式

1. 超越文字链的创意
2. 弱相关广告形式
3. 原生化探索


#### 5.1.3 搜索广告产品策略

除了产品形式上的创新，搜索广告的投放和优化策略也是产品的重要一环。搜索广告决策的基本过程：
![-c748](/images/15543691507228.jpg)

搜索广告的整个决策过程可以分为查询扩展、检索、排序、放置、定价等几个阶段。
**查询扩展**是搜索广告独有的策略，目的是给广告主自动地拓展相关的查询词，扩大采买流量；
**广告检索**和将候选广告根据**eCPM排序**是广告系统较为通用的核心流程（本章后面介绍广告网络时再讨论）；
**定价**是竞价广告非常核心的策略（在下一节机制设计中将重点介绍）。

注意排序指标：单纯只是以广告主的出价排序，出价最高的广告赢得了很多曝光，但如果没人点击，平台还是没有收入。因此，在投放过程中预估每条广告的点击率，然后按点击率和出价的乘积对广告排序，这也就形成了现在竞价广告普遍采用的根据 eCPM 决策的逻辑。

#### 5.1.4 产品案例

1. Google AdWords
2. 淘宝直通车

### 5.2 位置拍卖与机制设计
以搜索广告为代表的竞价广告实际上是像拍卖那样销售广告展示机会。系统根据广告主的出价以及由此计算出的eCPM决定谁可以得到某次展示的广告位。

![-c332](/images/15543703217426.jpg)

这样的位置拍卖问题中的一些重要机制往往对整个竞价市场的收益、稳定性、公平性等有着巨大的影响，这一类问题称为机制设计问题。在广告中常见的机制设计问题包括定价、市场保留价、价格挤压等

#### 5.2.1 定价问题
围绕位置拍卖最重要的机制设计是所谓的定价（Pricing）问题，它探讨的是在一次位置拍卖中给定各参与者的出价以及他们的期望收益，如何对最后获得某个位置的广告主收取合适的费用。

整个竞价系统处于纳什均衡（Nash equilibrium）状态，也即每个广告主都通过出价得到了最符合自己利益的位置。对某一次位置竞价来说，其对称纳什均衡（symmetric Nash equilibrium）状态可以表示为下式：

$$
\begin{array}{l}{\mu_{s}\left(\nu_{s}-q_{s}\right) \geqslant \mu_{t}\left(\nu_{s}-q_{t}\right), \forall t>s} \\ {\mu_{s}\left(\nu_{s}-q_{s}\right) \geqslant \mu_{t}\left(\nu_{s}-q_{t-1}\right), \forall t<s}\end{array}
$$

注意这里的下标意义有所调整，这里的$v_s$指的是排在 $s$ 位置上的广告的点击价值，并非 $s$ 位置带来的点击价值，而 $q_s$ 指的是市场向排在 $s$ 位置上的广告收取的费用，即定
价，也就是广告主的单次投入。这一均衡状态的意义很容易理解：对于最终位置排名竞价结果中的每一条广告，其收益都比排在其他位置上要高。显然，在这样的状态下，每个广告主都达到了自己最优的状态，整个系统也就随之稳定下来。

**市场方能够调整的策略只有$q_s$的确定方式，也就是定价策略**

**1. 广义第二高价（GSP）**

单位置的拍卖中，向赢得该位置的广告主收取其下一位广告主的出价，这样的拍卖也叫作 Vickrey拍卖。多位置拍卖中对赢得每一个位置的广告主，都按照他下一位的广告位置出价来收取费用，这就是广义第二高价。广义第二高价不是多位置拍卖时的最优定价策略，却有着实现
简单、容易向广告主解释等诸多操作中的优点，因此在实际的竞价广告系统中是最主流的
定价策略。

**2. VCG定价**

是Vickrey、Clarke和Groves在研究竞价系统均衡状态时得到的一种理论上较为优越的定价策略。其基本思想是：对于赢得了某个位置的广告主，其所付出的成本应该等于他占据这个位置给其他市场参与者带来的价值损害。

$$
q_{s}=\sum_{t>s}\left(\mu_{t-1}-\mu_{t}\right) \nu_{t}
$$

#### 5.2.2 市场保留价

> 为了控制广告的质量和保持一定的出售单价，竞价广告市场往往要设置一个赢得拍卖位置的最低价格，这一价格我们称为市场保留价（Market Reserve Price，MRP），俗称“起价”或“底价”。

一般来说，当竞争较充分、广告主深度足够时，MRP 可以设置得比较高；反之则应适当降低。市场保留价的设置有两种方法，一是对整个竞价市场采用同样的保留价格，二是根据不同标的物（如搜索广告里的关键词）的特性设置不同的保留价格。


#### 5.2.3价格挤压

在CPC结算的广告产品中，eCPM可以表示成点击率和出价的乘积，增加价格挤压（squashing）因子后，公式调整为
$$
eCPM=r=\mu^\kappa \cdot bid_{CPC}
$$

$ \kappa $ 为一个大于0的实数。可以考虑两种极端情况来理解κ的作用,当$\kappa \to \infty$时，相当于只根据点击率来排序而不考虑出价的作用；反之，当$\kappa \to 0$ 时，则相当于只根据出价来排序。
价格挤压因子的作用主要是能够根据市场情况更主动地影响竞价体系向着需要的方向
发展。


#### 5.2.4 定价结果示例

![-c739](/images/15546272936328.jpg)

### 5.3 广告网络

> 剩余流量（remnant inventory）

对展示广告而言，合约式的售卖方式必然无法消耗所有的库存，实际销售中为了控制售卖比以获得更高的品牌溢价空间，未通过合约售卖的广告流量很多。这部分流量称为剩余流量。

> 广告网络

广告网络的产品功能是批量聚合各媒体的剩余流量，按照人群或上下文标签的流量切割方式售卖给广告主。

#### 5.3.1 广告网络产品形态
一般来说，广告网络中的投放决策过程对媒体而言类似于一个黑盒子。在实际运营中，广告网络既有竞价的售卖方式，也有合约的售卖方式。不过我们这里重点讨论
的是其竞价部分。

![-w472](/images/15546331823709.jpg)
竞价广告网络的产品逻辑如图所示。产品关键：
1. 一是售卖的标的主要是人群，而广告位被淡化了。（根据上一章的讨论知道，合约广告是很难淡化广告位标的的。）
2. 当流量满足多个广告活动要求时，简单地采用竞价模式而不用考虑量的合约。

竞价广告网络关键的产品特点：
1. 竞价方式不向广告主做量的约定，而是根据变现能力，即 eCPM，来决定每次展示分配给哪个广告主。
2. 由于是按人群售卖，广告网络会极力淡化媒体和广告位的概念。
3. 从商业角度来看，广告网络的销售模式与合约的方式相比也有两点优势：降低广告主品牌独占，提高市场流动性；财务上采用广告主先充值的方式，区别于合约广告投放结束后计算的方式，改善了广告网络运营方的现金流状况。

广告网络存在 CPM、CPC 和 CPS 等不同的结算方式，不过最主流的方式是 CPC。由广告网络负责估计点击率，需求方根据对点击价值的估计来出价，是最合理的市场分工。

#### 5.3.2 广告网络产品策略

![-c682](/images/15546341601781.jpg)

1. 广告检索
2. 广告排序

```
与广告位较规整、点击率较高的搜索广告相比，广告网络中的 CTR 预测有两方面的困难。首先，点击数据更加稀疏，而且需要同时考虑上下文和用户量方面的信息，这使得各种新广告、新策略的冷启动问题非常突出。其次，广告网络中由于广告位的差别巨大，点击率的变动范围很大，这使得稳健地估计点击率变得相对困难。
```
3. 广告定价

#### 5.3.3 产品案例 

实际的广告网络有两种不同的业务方向，一种是广泛承接各种广告库存并面向所有品
类的广告主进行服务，称为水平广告网络；另一种则专门服务于某一种类型的广告主，如电商、游戏等，并寻找相关的媒体资源来搭建网络，称为垂直广告网络。
1. Google Display Network
2. 淘宝客



### 5.4 竞价广告需求方产品
竞价广告市场的产生对需求方的技术也提出了新的要求：原来通过直接与媒体签订保量合约的采买方式变成通过竞价为广告主完成量与质需求的采买产品。即按照广告主预算跨媒体一站式采买人群的功能。

* 如何挑选合适的目标人群
* 如何对各个目标人群给出合适的出价

#### 5.4.1 搜索引擎营销

> 搜索广告对应的需求方产品，即通过竞价采买搜索引擎关键词来做推广，这就是搜索引擎营销，即SEM。

**关键问题：关键词选择和出价**

#### 5.4.2 媒体购买平台
> 面向展示广告网络的一站式采买平台称为媒介采买平台，与之类似的概念还有交易终端（Trading Desk，TD），可以认为是同一类的产品。

媒体采买平台的技术挑战主要在于 ROI 的优化部分，要合理地选择需要的受众定向条件，并在每个人群上优化出价，以保证量的要求和优化收益是一个复杂的组合优化问题。

#### 5.4.3 产品案例
对于非实时的竞价广告产品，需求方的优化比较困难，因此主要在投资回报比较高的SEM 中得到了充分发展。

* EfficientFrontier


### 5.5 竞价广告与合约广告的比较

1. 从供给方或广告市场方来看，合约广告和竞价广告的对比可以类比于计划经济和市场经济的区别。
2. 从需求端来看，合约广告的采买方式对广告主来说缺乏透明性。
3. 竞价广告中，供给方和广告主的约定比较松散。首先，供给方不再向广告主承诺广告投放量；与此相对应，点击单价由广告主自行决定。

广告市场产生了以下三个有利于大幅提高广告效果的发展趋势。
1. 非常精细的受众定向可以被无障碍地使用在交易中，而这是展示量合约广告很难做到的。由于这一点，市场的效率得到了巨大提升。
2. 大量的中小广告主逐渐成为参与竞价的主体，这使得市场的规模得到了快速扩张。
3. 与合约广告相比，竞价广告中数据的价值得以彰显，整个市场开始以数据为核心来组织和运营广告产品。


## 6. 程序化交易广告
随着需求方优化效果的要求进一步加强，广告网
络在产品形态上已经无法完全满足需要，而市场的发展方向是向需求方彻底开放。
除了允许广告主按照已经定义好的用户划分来购买，还要进一步提供广告主自行选择流量和在每次展示上独立出价的功能。这样的功能，必然要求询价、出价和竞价在展示时进行，这也就产生了以实时竞价即 RTB 为核心的**程序化交易市场**。

![-w448](/images/15546935367040.jpg)


> RTB 的产生，使得广告市场向着透明的比价平台的方向发展，这样的平台就是广告交易平台，即 ADX。

ADX主要特征即是用RTB的方式实时得到广告候选，并按照其出价简单完成投放决策。

### 6.1 实时竞价

> 在加工人群标签的过程中需要利用到广告主的数据,这样的标签称为定制化用户标签（customized audience segmentation）。


> 采用广告网络这样的封闭式竞价方案是无法规模化和精细化地针对定制化标签进行投放的。

> 用定制化标签指导广告投放是实时竞价的**关键产品目标**


#### 6.1.1 实时竞价流程
实时竞价的接口可以分成两个过程，预先进行的将ADX与DSP的用户标识对应起来的**cookie映射（cookie mapping）**过程和**线上广告请求时的竞价和投放**过程。

![-c666](/images/15547033733628.jpg)

1. cookie映射。cookie映射一般是由DSP在广告主网站上发起，这样做的原因是，一般情况下DSP负责的是加工广告主定制受众标签，因而不需要对所有用户都建立对应关系。这一过程又可以细分为以下两个步骤。
    - 步骤 1.1：从广告主网站向 DSP 服务器发起 cookie 映射请求。
    - 步骤 1.2：DSP 与 ADX 服务器之间通信完成 cookie 映射
2. 广告请求（ad call）。以 Web 投放环境为例，RTB 的广告请求可以分为以下三个步骤：
  - 步骤 2.1：用户浏览媒体网站。
  - 步骤 2.2：媒体网站通过 JavaScript 或 SDK 向 ADX 发起广告请求。
  - 步骤 2.3：ADX 向各 DSP 传送 URL 和本域名 cookie，发起询价请求。
  - 步骤 2.4：媒体网站从胜出的 DSP 拿到广告创意并展示。

#### 6.1.2 实时竞价问题

实时竞价的交易方式虽然给予了广告主最大的流量选择空间，也对系统提出了更高的要求，并且带来了下面一些实际问题。
1. 每次展示都有 ADX 服务器与多个 DSP 服务器的参与，这使得服务器与带宽成本大大增加。
2. 在询价过程中，ADX 要等待一个约定好的时间片（一般情况下为 100 ms），这使得用户看到的广告延迟增加，对 CTR 有负面影响。
3. 原理上 DSP 可以以极低的出价参与竞价，这样虽不能获得流量，却可以低成本得到在媒体网站上的用户行为数据，这里存在着潜在的信息泄露风险。

RTB 的接口有两个对接方：在 ADX 方实现的部分称为 RTBD（RTB for Demand）；在DSP 方实现的部分称为 RTBS（RTB for Supply）。在各个 ADX 中，RTB 接口的细节和具体参数有很大的不同，显然这对于广告主从不同的 ADX 中统一采买流量是不利的。为此IAB 经过充分市场调研与企业合作，制定了 OpenRTB的接口标准。

### 6.2 其他程序化交易方式

> 在实时竞价产生以后，广告交易越来越多地依赖机器间在线的协商而非事先约定或人工操作完成，这样的交易方式称为程序化交易。程序化交易的核心目的是让需求方能够自由地选择流量和出价。

#### 6.2.1 优选
优选比实时竞价产生要早，可以看成是只有一个需求方的程序化交易，其交易过程如图 6-3 所示。
![-w537](/images/15547060289294.jpg)

### 6.2.2 私有市场
除了实时竞价这种公开的市场拍卖机制以外，有时媒体为了保证广告主的质量，希望将拍卖限制在一些被邀请需求方的小范围内。这种程序化交易叫作私有市场。私有市场中的在线交易过程与公开的实时竞价一致，在此不再赘述。

![-w746](/images/15547063611383.jpg)

#### 6.2.3 广告交易方式谱系
![-w633](/images/15547064812407.jpg)

### 6.3 广告交易平台

> 广告交易平台，即 ADX，是程序化交易时代的关键产品，它负责将媒体流量以拍卖的方式售卖给 DSP，可以类比于证券市场中的交易所。

ADX 的产品策略较为简单，由于所有的广告竞价都是实时进行，因此不需要保存广告库，因而也不需要广告检索流程，排序过程也非常简单。广告交易平台中需要注意的产品策略，主要是如何解决给多个 DSP 发广告请求带来的带宽和机器成本的上升。这一问题，我们称为询价优化（call out optimization）。

ADX一般为CPM结算方式。实时竞价中广告决策是由 DSP 完成的，而且对每次展示都可以得到广告位信息。因此，虽然各个广告位的点击率差别很大，DSP 还是可以自行精细估计点击率，并实时计算出当前展示的合理 eCPM。并且，由于第一方数据在程序化交易中的广泛使用，DSP 对于人群在特定广告上产生的效果往往能够估计得更加精细。因此，按照 CPM 结算，将 eCPM 整体的估计都交给需求方是比较合适的市场分工。

产品案例：RightMedia 和 DoubleClick Adx


### 6.4 需求方平台
> 与 ADX相对应，以 RTB 方式购买广告的产品形态就是需求方平台，即 DSP。


**核心特征**有两个：一个是 RTB 方式的流量购买，另一个是需要支持需求方定制化的用户划分。

由于可以细分到每次展示的粒度来决策和出价，这使得需求方可以像一个推荐系统那样精细化地执行广告活动，也使得**推荐和广告**这两项重要的互联网技术找到了完美的契合点。


#### 6.4.1 需求方平台产品策略

DSP 的广告决策过程经过检索、排序、定价、出价几个阶段。
![-w665](/images/15547080166502.jpg)

与广告网络的差异：
1. 出价直接决定着 DSP 的流量基本单位成本，当然也就决定着利润。
2. 受众定向的方式上不同，在广告网络中，主流的定向方式都是根据第二方数据加工的标签；但是在 DSP 中，以第一方数据为核心，结合第二方或第三方数据的定制化标签，即$t(a，u)$的定向方式，是其关注的重点。重定向和 look-alike（新客推荐）的方法具有一定的普适性

#### 6.4.2 出价策略
> 准确地估计eCPM非常关键，这也成为 DSP 出价策略的基础。


我们希望获得的并不是市价较低的流量，而是 eCPM 与市价的比例较大的流量。DSP 的出价策略要基于两条曲线，即 eCPM 和市价随时间变化的曲线。

做好时间轴上的出价策略是实践中最关键的。

#### 6.4.3 重定向

> 即把那些曾经对广告主服务发生明确兴趣的用户找出来，向他们投放该广告主的广告。是在线广告中最早产生，也最广泛使用的一种定制化标签。

重定向目的(作用原理)
1. 用于品牌广告，提高品牌的认知度。这种用途下，应当以宣传品牌而不是具体产品为主要诉求。
2. 用于效果广告，没有完成最终转化的用户找回或推荐类似广告。


从信息来源和使用信息的精细程度上区分：
- 网站重定向（site retargeting），即将在一段时间内到达过广告主网站的用户作为重定向集合。
- 个性化重定向（personalized retargeting），可以认为是一种站外推荐（off-site recommendation），是将原来广告主网站上的推荐模块搬到了站外。
- 搜索重定向（search retargeting），搜索过与广告主直接相关的关键词的用户群作为重定向集合

**个性化重定向与传统的受众定向方式有较大的差别，其产品有以下三个关键点**：

1. 动态创意。个性化重定向的核心是用推荐的思路实时决定展示什么商品。
2. 推荐引擎。个性化重定向可以看作是站外推荐。站内商品页上的推荐主要根据上下文信息来进行，而站外推荐则是根据用户信息来进行；另外，站内推荐由于是发生在某个特定的购买环节上的，因而往往不需要根据用户的购买阶段来调整创意，而站外推荐这么做则非常必要。
3. 广告主商品库存实时接口。个性化重定向服务需要提供准实时的商品库接口，让广告主可以及时地将库存和价格信息同步过来。

#### 6.4.4 新客推荐
> 由广告主根据自己的第一方数据提供一部分种子用户，再由拥有更丰富数据的第二方数据的广告平台分析这些用户网络行为的特征，并根据这些特征找到具有相似特征的拓展人群

#### 6.4.5 产品案例
以技术方式优化广告采买的 DSP 公司。这些公司当中，有些以 CPM 采买并优化 ROI 的套利模式为主；有的则以透明的采买和效果优化功能性服务为主。

- Criteo
- InviteMedia
- 聚效广告平台

### 6.5 供给方平台
> 广告请求是被分配到自运营广告库，还是其他广告网络，或者是 DSP，是根据他们的收益在线动态决定的，这样的方案称为动态分配（dynamic allocation）。对应的产品形态就叫作供给方平台（Supply Side Platform，SSP）。


#### 6.5.1 供给方平台产品策略
SSP中多种广告源动态分配的决策过程如图 6-9 所示。
![-w676](/images/15547180454505.jpg)

（1）从自有广告库中根据当前受众标签检索合适的广告候选，并估计每个广告候选
的 eCPM。
（2）排序得到 eCPM 最高的广告候选以及相应的 eCPM 值 $rMAX$。
（3）同样根据环境信息和受众标签估算出各个合作的广告网络大致的 eCPM。
（4）排序得到 eCPM 最高的广告网络以及相应的 eCPM值$r^{'}MAX$
（5）以$\max\left(r_{\mathrm{MAX}},r_{\mathrm{MAX}}^{\prime}\right)$为底价，通过 RTB 接口向各个合作的 DSP 查询更高变现价值的广告

先进行本地广告检索和 eCPM 估计再进行 RTB 的好处是可以根据当前展示的情况动态调整 RTB 的底价，而当底价高到一定程度时，即可以略去 RTB 的过程，从而减轻服务器的负担。这样一来，此过程既可以利用 RTB 带来的大量广告主和市场流动性，又充分利用了本地广告库抬高竞价水平。

#### 6.5.2 产品案例

- Admeld
- Rubicon

### 6.6 数据加工与交易
要提高定向的精准程度与人群覆盖率，技术远不是唯一重要的因素。数据的来源与质量才是决定性的因素。

#### 6.6.1 有价值的数据

- 用户标识
cookie，广告专用用户标识符（Identifier for Advertising，IDFA）、Android ID 或 IMEI（international mobile equipment identity）号等标识信息
- 用户行为
    - 决策行为主要包括转化和预转化。
    - 主动行为主要包括广告点击、搜索和搜索点击。
    - 半主动行为主要包括分享和网页浏览。
    - 被动行为主要是
- 人口属性
- 地理位置
- 社交关系

#### 6.6.2 三方数据划分
广告中用到的用户数据，根据其来源的不同可以分为第一方数据、第二方数据和第三方数据，如图 6-11 所示。
![-w354](/images/15547801181578.jpg)

在广告网络中，主要使用第二方数据指导广告投放；而在实时竞价环境下，不仅第一方数据可以被利用，大量第三方数据的加工和交易也逐渐发展起来。虽然，一般情况下第一方数据的量较小，却是所有数据的灵魂。**以第一方数据为基础，用好第二方数据和第三方数据，是实时竞价时代重要的方法论。**


#### 6.6.3 数据管理平台

第一方数据的收集和加工是广告市场上非常重要的环节。DMP 有下面几个核心的产品功能：

1. 它可以为网站（可以是媒体也可以是广告主网站）提供受众定向功能，并将得到的用户标签应用于网站业务。
2. 如果媒体网站授权，DMP 可以提供接口对加工出来的用户标签进行变现，并与网站进行分成
3. 广告主网站可以通过 DMP 与广告采买渠道进行更方便的数据对接。

#### 6.6.4 数据交易平台
> 数据交易平台（data exchange）的主要产品功能是聚合各种来源的在线的用户行为数据，加工成有价值的用户标签，然后在广告市场上通过售卖这些标签来变现。

### 6.7 在线广告产品交互关系
图 6-12 示意性地表示了在线广告市场各种产品
的交互关系。
![-w422](/images/15547812957881.jpg)

从媒体角度来看，有以下三种产品可以帮助其变现流量。
（1）可以将广告位托管给广告网络，由广告网络决策广告投放，从赚取分成，如图
6-12 中的“媒体 1”。
（2）可以将广告位对接到广告交易平台，以实时竞价的方式变现，如图 6-12 中的“媒
体 2”。
（3）也可以将广告位托管给 SSP，这样可以同时对接多个广告网络和 PMP 接口，
并按照动态分配的逻辑选择变现最高的需求方（这一产品的具体情况我们在后文介绍），
如图 6-12 中的“媒体 3”

### 第 7 章 移动互联与原生广告
> 所有将商业化内容与非商业化内容统一生产或混合排序的产品都可以认为与原生广告有关系，这样的产品方向经常被称为内容即广告（content as ad）

![-w421](/images/15547902245643.jpg)

1. 原生广告得到充分的重视是在移动互联网时代到来以后。这是因为在屏幕较小的移动设备环境下，独立地展示和运营广告与内容遇到了巨大的挑战。
2. 与内容结合的原生广告如何能够规模化、交易化运营是产品面临的一个棘手的挑战。


### 7.1 原生广告相关产品
#### 7.1.1 信息流广告
信息流广告起源于社交网络。适合于信息流广告的媒体都有一个共同特点，即信息流中的各条内容相关性并不强。在这种情形下，插入一条商业化内容在形式上不会显得太突兀，用户体验也会较好 。

**案例**：Facebook、微博、QQ 空间等社交网络和Yahoo! 新首页、今日头条等非社交类的媒体。

#### 7.1.2 搜索广告
搜索广告的展示形式与自然搜索结果基本一致，也可以看成是存在于同一个信息流当中。
搜索广告与内容的混合方式有两种，一种是将广告在固定的位置上展现，另一种是将广告与内容混合排列在一起。
如果按照内容即广告的思路前进，那么在搜索引擎中，内容与广告按照同一准则的统一排序将会是一个有价值的发展方向。

#### 7.1.3 软文广告
> 在这种广告类型中，内容本身就是为了委婉地宣传某种产品而生产的。较高质量的软文往往让读者可以像接受普通文章一样接受其内容，因而宣传效果也会比较好。

#### 7.1.4 联盟
> 由媒体从广告库中自由选择要推广的对象，并按照自己控制的展现方式进行推广。

### 7.2 移动广告的现状与挑战
#### 7.2.1 移动广告的特点

1. 情境广告的可能性。从用户行为分析角度来看，移动设备与 PC 最大的不同是可以对用户行为模式进行全天候的监测和分析。 
2. 大量潜在的本地化广告主。广告发展到今天，可以说没有任何主流的渠道可以帮助本地化小商家做推广。在移动环境下，GPS、蜂窝、Wi-Fi 等多种精确定位的手段使得基于精确地理位置的本地化广告变得可行。当然，精确地理位置也需要结合移动特点，用情境化的方式来使用。

#### 7.2.2 移动广告的创意形式
- 横幅与插屏
- 开屏与锁屏
- 推荐墙与积分墙

#### 7.2.3 移动广告的挑战

1. 应用生态造成的行为数据割裂。
2. 许多 PC 时代广告主移动化程度还不够，无法充分消化广告带来的流量。
3. 移动广告的产品形态需要一次革命，只有原生化才是移动广告的未来。

### 7.3 原生广告平台
7.3.1 表现原生与意图原生
> 一种诉求是将广告的展示风格和样式变得与内容相一致，从而做到产品形式上的“原生”；另一种诉求是将广告的投放决策逻辑与内容生产相一致，从而做到用户意图上的“原生”。我们把这两种原生分别称为表现原生与意图原生。

社交网络信息流广告侧重于表现的原生性，而搜索
广告在表现和意图两个方面都是原生的。

比较理想的原生广告平台应该能兼顾表现原生和意图原生的要求，并且仍然可以以第三方平台的形式规模化地运营。

#### 7.3.2 植入式原生广告
1. 第三方运营的原生广告平台中，媒体应该提供如下合理且有指导性的广告需求：一是要判断用户当前的意图，二是要确定根据用户的意图提供什么信息。
2. 广告平台提供的是结构化的付费内容。由于媒体控制广告展示，广告平台返回的就不能是成型的图片或文字链创意，而必须是一些结构化的信息作为媒体拼装创意的素材。
![-w620](/images/15548670357850.jpg)

#### 7.3.3 产品案例
- InMobi 原生广告
- OutBrain

### 7.4 原生广告与程序化交易
原生广告的触发是否根据用户意图进行。在明确提供用户意图的原生广告中，完全开放地进行RTB，很难控制付费结果的相关性。社交网络信息流这样的原生广告环境，由于用户意图并不明确，也不要求广告依此触发，完全可以考虑用程序化交易的方式来运营。

## 8. 在线广告产品实践
从广告和泛广告变现的角度来看，在互联网市场上主要有三种资产能够变成钱，分别是**数据、流量和品牌属性**。后两项是媒体的专属，而第一项既可能来自于媒体，也可能来自于第三方的数据拥有者。
1. 媒体如何利用合适的广告产品更好地变现？
2. 广告主应选择何种广告平台，结合什么样的数据来完成高效的营销？
3. 拥有数据的第三方组织如何利用广告市场将自己的数据变成钱？

### 8.1 媒体实战
> 媒体指的是一切拥有流量的 Web 网站、WAP 网站、HTML5 网站、PC 或移动应用程序等。媒体的变现渠道无非是面向终端用户和面向客户两种。

![-w757](/images/15548683666084.jpg)

#### 8.1.1 变现方式和产品决策
在移动互联和广告实效化充分发展的今天，我们建议媒体首先要考虑的变现方式是原
生广告。原生广告的变现产品落地有两种选择：
1. 如果流量充分，可以自行运营原生广告平台（如站内的搜索或新闻应用的内容）
2. 如果流量不充分，那么合理的方案是与其他原生广告平台或相关行业的搜索广告提供商合作

#### 8.1.2 数据支持方案决策
当有 CPM 定向广告、自营广告网络或私有交易存在时，媒体在确定了利用广告变现的产品形式和交易方式以后，还需要考虑这些产品需要的数据支持。

### 8.2 广告主实战
> 广告主指的是所有以付费方式推广自己的品牌、产品或内容的组织。


广告主对营销方式的选择，主要要考虑几方面的因素：是推广品牌还是直接销售？是否有自己的第一方数据可以用于营销？对新客和老客的营销重点如何？
![-w735](/images/15548687128145.jpg)
影响广告主在线营销推广方案的第一要素是推广的目的。根据品牌和效果这两大类不同的推广目的，应该选择的推广产品和策略也大相径庭：
1. 如果推广的目的为直接转化，也就是直接效果广告，那么先根据是否利用广告主自己的第一方数据做渠道来进行选择。
2. 如果营销的目的是品牌推广而非直接转化，那么应该考虑一些以用户接触为主的合约广告产品。

### 8.3 数据提供方实战
> 在线广告交易使得那些拥有数据、但是既不是广告主又不是媒体的组织也可以参与到其中。

一个组织拥有数据并不等于数据值得变现。在考虑数据变现之前，需要先对数据的价值有合理的评估。
![-w592](/images/15548689671446.jpg)


## 疑问汇总
- 5.2.1定价问题
- 6.7 在线广告产品交互关系